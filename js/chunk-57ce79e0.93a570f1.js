(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57ce79e0"],{"0389":function(e,t,a){"use strict";var n=a("5530"),r=a("7a23"),c=function(e){return Object(r["x"])("data-v-263088b5"),e=e(),Object(r["v"])(),e},u=["value","disabled"],i=c((function(){return Object(r["h"])("option",{disabled:"",value:""},"-- 請選擇城市 --",-1)})),o=["value"];function s(e,t,a,c,s,l){var f=Object(r["C"])("InputGroup");return Object(r["u"])(),Object(r["e"])(f,{label:"城市搜尋"},{default:Object(r["I"])((function(){return[Object(r["h"])("select",Object(r["o"])({class:"field",value:a.modelValue},Object(n["a"])(Object(n["a"])({},e.$attrs),{},{onChange:function(t){e.$emit("update:modelValue",t.target.value),a.searchHandler()}}),{disabled:!l.initMap}),[i,(Object(r["u"])(!0),Object(r["g"])(r["a"],null,Object(r["A"])(a.cities,(function(e){return Object(r["u"])(),Object(r["g"])("option",{key:e.City,value:e.City},Object(r["E"])(e.CityName),9,o)})),128))],16,u)]})),_:1})}a("d81d");var l=a("76ff"),f={components:{InputGroup:l["a"]},props:{modelValue:{type:String,default:""},searchHandler:{type:Function,required:!0},cities:{type:Array,required:!0}},computed:{initMap:function(){return this.$store.state.map.OSM}}},d=(a("4e19"),a("d959")),p=a.n(d);const b=p()(f,[["render",s],["__scopeId","data-v-263088b5"]]);var v=b;t["a"]=v},"0d7d":function(e,t,a){},1268:function(e,t,a){"use strict";a.r(t);var n=a("1da1"),r=(a("96cf"),a("7db0"),a("d3b7"),a("d81d"),a("4de4"),a("7a23")),c=a("5502"),u=a("b824"),i=a("f5d03"),o=a("0389"),s=a("fcd9"),l=function(e){return Object(r["x"])("data-v-6495d46a"),e=e(),Object(r["v"])(),e},f={class:"travelSearchList"},d=["onClick"],p=l((function(){return Object(r["h"])("i",{class:"fas fa-link"},null,-1)}));function b(e,t,a,n,c,u){var i=Object(r["C"])("AppLink");return Object(r["u"])(),Object(r["g"])("ul",f,[(Object(r["u"])(!0),Object(r["g"])(r["a"],null,Object(r["A"])(a.searchResult,(function(e){return Object(r["u"])(),Object(r["g"])("li",{class:Object(r["q"])(["search-item",{active:u.activeID===e["".concat(a.page,"ID")]}]),key:e["".concat(a.page,"ID")]},[Object(r["h"])("p",{onClick:function(t){return u.listActiveHandler(e)}},Object(r["E"])(e["".concat(a.page,"Name")]),9,d),Object(r["j"])(i,{to:{name:"travel-detail",params:{id:e["".concat(a.page,"ID")],name:e["".concat(a.page,"Name")]}},onClick:function(t){return u.listActiveHandler(e)}},{default:Object(r["I"])((function(){return[p]})),_:2},1032,["to","onClick"])],2)})),128))])}var v=a("aac4"),O={components:{AppLink:v["a"]},props:{searchResult:{type:Array,required:!0},page:{type:String,required:!0}},created:function(){var e=this;if(this.activeID){var t=this.searchResult.find((function(t){return t["".concat(e.page,"ID")]===e.activeID}));this.listActiveHandler(t)}},computed:{activeID:function(){return this.$store.state.travel.activeID}},watch:{searchResult:function(){window.scrollTo({top:0})}},methods:{listActiveHandler:function(e){var t=e.Position.PositionLat,a=e.Position.PositionLon;this.$store.commit("travel/SET_ACTIVE_ID",e["".concat(this.page,"ID")]),this.$store.state.map.OSM.setView([t,a],18),this.$store.state.map.markersCluster.eachLayer((function(e){var n=e._latlng;n.lat===t&&n.lng===a&&e.openPopup()})),this.$store.commit("SET_MAP_ACTIVE",!0)}}},j=(a("2d65"),a("d959")),h=a.n(j);const m=h()(O,[["render",b],["__scopeId","data-v-6495d46a"]]);var g=m,I=g,y={class:"travelIndex"},_={class:"page-search-content"},k={key:0,class:"page-search-remind"},w={props:{page:{type:String,required:!0}},setup:function(e){var t=e,a=Object(c["c"])(),l=a.state,f=a.commit,d=a.dispatch,p=Object(r["z"])(""),b=Object(r["z"])(""),v=Object(r["z"])([]),O=Object(r["c"])((function(){return t.page.toUpperCase()})),j=Object(r["c"])((function(){return l.travel.travelData})),h=Object(r["c"])((function(){return l.travel.selectCity})),m=Object(r["c"])((function(){return u.find((function(e){return e.City===p.value})).CityName}));function g(e){var a=t.page;d("map/setTravelMarkers",{page:a,markers:e.map((function(e){return{name:e["".concat(a,"Name")],position:[e.Position.PositionLat,e.Position.PositionLon],id:e["".concat(a,"ID")]}}))})}function w(){return E.apply(this,arguments)}function E(){return E=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return d("showLoader",!0),v.value=C(j.value),g(v.value),e.next=5,d("map/setLocationOfCityOnMap",m.value);case 5:A(),V(),d("showLoader",!1);case 8:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function S(){v.value=N(b.value),T()}function C(){return j.value.filter((function(e){return e.City===m.value}))}function N(e){return v.value.filter((function(a){return-1!==a["".concat(t.page,"Name")].indexOf(e)}))}function A(){f("travel/SET_SELECT_CITY",p.value)}function T(){f("travel/SET_KEYWORDS",b.value)}function V(){b.value="",f("travel/SET_KEYWORDS","")}return Object(r["G"])((function(){return t.page}),Object(n["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=function(){p.value=h.value,b.value=l.travel.keywords;var e=C();v.value=e,b.value&&(e=N(b.value),v.value=e),g(e)},a=function(){p.value="",b.value="",v.value=[],d("map/clearMarkersCluster")},d("showLoader",!0),a(),e.next=6,d("travel/fetchTravelData",t.page);case 6:d("travel/setTravelData",t.page),h.value&&n(),d("showLoader",!1);case 9:case"end":return e.stop()}}),e)}))),{immediate:!0}),function(t,a){return Object(r["u"])(),Object(r["g"])("div",y,[Object(r["j"])(Object(r["F"])(i["a"]),{title:Object(r["F"])(O)},{default:Object(r["I"])((function(){return[Object(r["j"])(Object(r["F"])(o["a"]),{modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=function(e){return p.value=e}),cities:Object(r["F"])(u),searchHandler:w},null,8,["modelValue","cities"]),Object(r["j"])(Object(r["F"])(s["a"]),{modelValue:b.value,"onUpdate:modelValue":a[1]||(a[1]=function(e){return b.value=e}),disabled:!p.value,result:v.value,keywordSearch:S},null,8,["modelValue","disabled","result"])]})),_:1},8,["title"]),Object(r["h"])("div",_,[0===v.value.length?(Object(r["u"])(),Object(r["g"])("p",k," 請選擇城市 ")):(Object(r["u"])(),Object(r["e"])(Object(r["F"])(I),{key:1,searchResult:v.value,page:e.page},null,8,["searchResult","page"]))])])}}};a("e862");const E=h()(w,[["__scopeId","data-v-0b6533f4"]]);var S=E;t["default"]=S},"2d65":function(e,t,a){"use strict";a("8406")},"3c48":function(e,t,a){},"408a":function(e,t,a){var n=a("e330");e.exports=n(1..valueOf)},"4e19":function(e,t,a){"use strict";a("0d7d")},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var n=a("e330"),r=a("1d80"),c=a("577e"),u=a("5899"),i=n("".replace),o="["+u+"]",s=RegExp("^"+o+o+"*"),l=RegExp(o+o+"*$"),f=function(e){return function(t){var a=c(r(t));return 1&e&&(a=i(a,s,"")),2&e&&(a=i(a,l,"")),a}};e.exports={start:f(1),end:f(2),trim:f(3)}},"76ff":function(e,t,a){"use strict";var n=a("7a23"),r={class:"input-group"},c={key:0,class:"input-label"};function u(e,t,a,u,i,o){return Object(n["u"])(),Object(n["g"])("div",r,[a.label?(Object(n["u"])(),Object(n["g"])("label",c,Object(n["E"])(a.label),1)):Object(n["f"])("",!0),Object(n["B"])(e.$slots,"default",{},void 0,!0)])}var i={props:{label:{type:String}}},o=(a("8d9f"),a("d959")),s=a.n(o);const l=s()(i,[["render",u],["__scopeId","data-v-927c45b6"]]);var f=l;t["a"]=f},8406:function(e,t,a){},"8d9f":function(e,t,a){"use strict";a("3c48")},"9c9f":function(e,t,a){"use strict";a("b72b")},a320:function(e,t,a){"use strict";a("f1ba")},a9e3:function(e,t,a){"use strict";var n=a("83ab"),r=a("da84"),c=a("e330"),u=a("94ca"),i=a("6eeb"),o=a("1a2d"),s=a("7156"),l=a("3a9b"),f=a("d9b5"),d=a("c04e"),p=a("d039"),b=a("241c").f,v=a("06cf").f,O=a("9bf2").f,j=a("408a"),h=a("58a8").trim,m="Number",g=r[m],I=g.prototype,y=r.TypeError,_=c("".slice),k=c("".charCodeAt),w=function(e){var t=d(e,"number");return"bigint"==typeof t?t:E(t)},E=function(e){var t,a,n,r,c,u,i,o,s=d(e,"number");if(f(s))throw y("Cannot convert a Symbol value to a number");if("string"==typeof s&&s.length>2)if(s=h(s),t=k(s,0),43===t||45===t){if(a=k(s,2),88===a||120===a)return NaN}else if(48===t){switch(k(s,1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+s}for(c=_(s,2),u=c.length,i=0;i<u;i++)if(o=k(c,i),o<48||o>r)return NaN;return parseInt(c,n)}return+s};if(u(m,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var S,C=function(e){var t=arguments.length<1?0:g(w(e)),a=this;return l(I,a)&&p((function(){j(a)}))?s(Object(t),a,C):t},N=n?b(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),A=0;N.length>A;A++)o(g,S=N[A])&&!o(C,S)&&O(C,S,v(g,S));C.prototype=I,I.constructor=C,i(r,m,C)}},adc9:function(e,t,a){},b72b:function(e,t,a){},e862:function(e,t,a){"use strict";a("adc9")},f1ba:function(e,t,a){},f5d03:function(e,t,a){"use strict";var n=a("7a23"),r={class:"page-top"},c={class:"pageTitle"};function u(e,t,a,u,i,o){return Object(n["u"])(),Object(n["g"])("div",r,[Object(n["h"])("h1",c,Object(n["E"])(a.title),1),Object(n["h"])("form",{class:"search-form",onSubmit:t[0]||(t[0]=Object(n["J"])((function(){}),["prevent"]))},[Object(n["B"])(e.$slots,"default",{},void 0,!0)],32)])}var i={props:{title:{type:String,required:!0}}},o=(a("a320"),a("d959")),s=a.n(o);const l=s()(i,[["render",u],["__scopeId","data-v-4297d960"]]);var f=l;t["a"]=f},fcd9:function(e,t,a){"use strict";var n=a("7a23"),r={class:"keyword-wrap"},c=["value","placeholder"];function u(e,t,a,u,i,o){var s=Object(n["C"])("InputGroup");return Object(n["u"])(),Object(n["e"])(s,{class:"cityKeywordInput",label:"關鍵字搜尋"},{default:Object(n["I"])((function(){return[Object(n["h"])("div",r,[Object(n["h"])("input",Object(n["o"])({class:"field",type:"text"},e.$attrs,{value:a.modelValue,onInput:t[0]||(t[0]=function(t){return e.$emit("update:modelValue",t.target.value)}),placeholder:o.hasResult?"請輸入關鍵字":"請先選擇城市"}),null,16,c),Object(n["h"])("button",{class:"search",onClick:t[1]||(t[1]=function(){return a.keywordSearch&&a.keywordSearch.apply(a,arguments)})},"搜尋")])]})),_:1})}a("a9e3");var i=a("76ff"),o={components:{InputGroup:i["a"]},props:{modelValue:{type:[String,Number],default:""},result:{type:Array},keywordSearch:{type:Function}},computed:{hasResult:function(){return this.result.length>0}}},s=(a("9c9f"),a("d959")),l=a.n(s);const f=l()(o,[["render",u],["__scopeId","data-v-52eb5e30"]]);var d=f;t["a"]=d}}]);
//# sourceMappingURL=chunk-57ce79e0.93a570f1.js.map