(function(t){function e(e){for(var a,r,c=e[0],u=e[1],s=e[2],l=0,p=[];l<c.length;l++)r=c[l],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&p.push(i[r][0]),i[r]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(t[a]=u[a]);f&&f(e);while(p.length)p.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,r=1;r<n.length;r++){var c=n[r];0!==i[c]&&(a=!1)}a&&(o.splice(e--,1),t=u(u.s=n[0]))}return t}var a={},r={app:0},i={app:0},o=[];function c(t){return u.p+"js/"+({}[t]||t)+"."+{"chunk-1e478b2e":"5e54e980","chunk-2fcdac3e":"fafc2149","chunk-3a08d0fb":"e37491f1","chunk-3e6e1ec5":"42e98a01","chunk-3ea0325d":"8c798e09","chunk-47aa1cfd":"f8d68e3a","chunk-57ce79e0":"93a570f1","chunk-6cdd9285":"ce75a8b8","chunk-bb86e918":"d775f257"}[t]+".js"}function u(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(t){var e=[],n={"chunk-1e478b2e":1,"chunk-2fcdac3e":1,"chunk-3a08d0fb":1,"chunk-3e6e1ec5":1,"chunk-3ea0325d":1,"chunk-47aa1cfd":1,"chunk-57ce79e0":1,"chunk-6cdd9285":1,"chunk-bb86e918":1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=new Promise((function(e,n){for(var a="css/"+({}[t]||t)+"."+{"chunk-1e478b2e":"0e433876","chunk-2fcdac3e":"659db38e","chunk-3a08d0fb":"7e52d1f0","chunk-3e6e1ec5":"26c4e349","chunk-3ea0325d":"882f966a","chunk-47aa1cfd":"cd7f9647","chunk-57ce79e0":"1773d2b5","chunk-6cdd9285":"e5c484ce","chunk-bb86e918":"30c1ea3b"}[t]+".css",i=u.p+a,o=document.getElementsByTagName("link"),c=0;c<o.length;c++){var s=o[c],l=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(l===a||l===i))return e()}var p=document.getElementsByTagName("style");for(c=0;c<p.length;c++){s=p[c],l=s.getAttribute("data-href");if(l===a||l===i)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var a=e&&e.target&&e.target.src||i,o=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=a,delete r[t],f.parentNode.removeChild(f),n(o)},f.href=i;var d=document.getElementsByTagName("head")[0];d.appendChild(f)})).then((function(){r[t]=0})));var a=i[t];if(0!==a)if(a)e.push(a[2]);else{var o=new Promise((function(e,n){a=i[t]=[e,n]}));e.push(a[2]=o);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=c(t);var p=new Error;s=function(e){l.onerror=l.onload=null,clearTimeout(f);var n=i[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;p.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",p.name="ChunkLoadError",p.type=a,p.request=r,n[1](p)}i[t]=void 0}};var f=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(e)},u.m=t,u.c=a,u.d=function(t,e,n){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)u.d(n,a,function(e){return t[e]}.bind(null,a));return n},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/Taiwain-Sightseeing/",u.oe=function(t){throw console.error(t),t};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var p=0;p<s.length;p++)e(s[p]);var f=l;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"00da":function(t,e,n){"use strict";n("fe8f")},"18fe":function(t,e,n){},"1c58":function(t,e,n){"use strict";n("e8e1")},"3c11":function(t,e,n){},"3cbb":function(t,e,n){},4625:function(t,e,n){"use strict";var a=n("7a23"),r={class:"wrapper"},i=Object(a["h"])("div",{id:"map"},null,-1),o={key:0,class:"icon-map fas fa-map"},c={key:1,class:"icon-list fas fa-list"};function u(t,e,n,u,s,l){var p=Object(a["C"])("TheNavigation");return Object(a["u"])(),Object(a["g"])(a["a"],null,[Object(a["h"])("div",r,[Object(a["j"])(p),Object(a["B"])(t.$slots,"default")]),Object(a["h"])("div",{class:Object(a["q"])(["map-wrap",{active:u.isMapActive}])},[i,Object(a["h"])("div",{class:"map-button",onClick:e[0]||(e[0]=function(t){return u.handleMapActive(!u.isMapActive)})},[u.isMapActive?(Object(a["u"])(),Object(a["g"])("i",c)):(Object(a["u"])(),Object(a["g"])("i",o))])],2)],64)}n("d81d");var s={class:"menu"},l=Object(a["h"])("i",{class:"fas fa-arrow-right"},null,-1),p=[l];function f(t,e,n,r,i,o){var c=Object(a["C"])("TheNavigationList");return Object(a["u"])(),Object(a["g"])("div",{class:Object(a["q"])(["theNavigation",{active:i.menuActive}]),"data-test":"navigation"},[Object(a["h"])("ul",s,[(Object(a["u"])(!0),Object(a["g"])(a["a"],null,Object(a["A"])(i.menuList,(function(t){return Object(a["u"])(),Object(a["e"])(c,{"data-test":"menu-list",key:t.title,title:t.title,path:t.path,iconClass:t.iconClass,menuActive:i.menuActive,onClick:e[0]||(e[0]=function(t){return o.toggleNavigation(!1)})},null,8,["title","path","iconClass","menuActive"])})),128))]),Object(a["h"])("div",{class:"active-button","data-test":"active-button",onClick:e[1]||(e[1]=function(t){return o.toggleNavigation(!i.menuActive)})},p)],2)}var d={class:"theNavigationList"},h={key:0,"data-test":"title"};function m(t,e,n,r,i,o){var c=Object(a["C"])("AppLink");return Object(a["u"])(),Object(a["g"])("li",d,[Object(a["j"])(c,{"data-test":"list-link",to:n.path,title:n.title},{default:Object(a["I"])((function(){return[Object(a["h"])("div",null,[Object(a["h"])("i",{"data-test":"icon",class:Object(a["q"])(n.iconClass)},null,2)]),n.menuActive?(Object(a["u"])(),Object(a["g"])("span",h,Object(a["E"])(n.title),1)):Object(a["f"])("",!0)]})),_:1},8,["to","title"])])}var b=n("aac4"),y={components:{AppLink:b["a"]},props:{title:{type:String,required:!0},path:{type:Object,required:!0},iconClass:{type:String,required:!0},menuActive:{type:Boolean,required:!0}}},v=(n("f5d0"),n("d959")),C=n.n(v);const g=C()(y,[["render",m],["__scopeId","data-v-b6f9be56"]]);var k=g,S=k,O=[{title:"景點查詢",path:{name:"travel-index",params:{page:"ScenicSpot"}},iconClass:"fas fa-binoculars"},{title:"YouBike即時車位查詢",path:{name:"bike"},iconClass:"fas fa-bicycle"},{title:"公車/客運時間查詢",path:{name:"bus-index"},iconClass:"fas fa-bus"}],T={components:{TheNavigationList:S},data:function(){return{menuList:O,menuActive:!1}},methods:{toggleNavigation:function(t){this.menuActive=t}}};n("1c58");const j=C()(T,[["render",f]]);var A=j,E=A,_=n("5502"),I=n("ed08"),w=n("e11e"),D=n.n(w),B={components:{TheNavigation:E},props:{page:{type:String}},setup:function(t){var e=Object(_["c"])(),n=Object(a["c"])((function(){return e.state.mapActive})),r=Object(a["c"])((function(){return e.state.map.currentPosition}));function i(t){e.state.map.OSM&&(e.dispatch("map/clearBusMap"),e.dispatch("map/clearMarkersCluster"));var n=D.a.map("map",{center:t,zoom:15,zoomAnimation:!1,zoomControl:!0,markerZoomAnimation:!0});e.dispatch("map/buildMap",n)}function o(t){e.commit("SET_MAP_ACTIVE",t)}function c(){e.commit("travel/SET_SELECT_CITY",""),e.commit("travel/SET_TRAVEL_DATA",null),o(!1)}return Object(a["G"])((function(){return t.page}),(function(t,n){t!==n&&(c(),r.value&&e.state.map.OSM.setView(r.value,15))})),c(),Object(I["b"])().then((function(t){i(t),e.dispatch("map/setCurrentPositionMarker",t),e.commit("map/SET_CURRENT_POSITION",t)})).catch((function(){i([25.0467351,121.5119929])})),{isMapActive:n,handleMapActive:o}}};n("00da");const R=C()(B,[["render",u]]);var M=R;e["a"]=M},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23"),r={class:"container"};function i(t,e,n,i,o,c){var u=Object(a["C"])("router-view"),s=Object(a["C"])("AppLoader");return Object(a["u"])(),Object(a["g"])("div",r,[Object(a["j"])(u),(Object(a["u"])(),Object(a["e"])(a["b"],{to:"#portal-loader"},[Object(a["j"])(s)]))])}n("d81d");var o=function(t){return Object(a["x"])("data-v-8342aed2"),t=t(),Object(a["v"])(),t},c={key:0,class:"appLoader","data-testId":"app-loader"},u=o((function(){return Object(a["h"])("div",{class:"lds-ellipsis"},[Object(a["h"])("div"),Object(a["h"])("div"),Object(a["h"])("div"),Object(a["h"])("div")],-1)})),s=[u];function l(t,e,n,r,i,o){return t.$store.state.loader||!t.$store.state.map.OSM?(Object(a["u"])(),Object(a["g"])("div",c,s)):Object(a["f"])("",!0)}var p={},f=(n("966b"),n("d959")),d=n.n(f);const h=d()(p,[["render",l],["__scopeId","data-v-8342aed2"]]);var m=h,b=m,y={components:{AppLoader:b}};const v=d()(y,[["render",i]]);var C=v,g=(n("d3b7"),n("3ca3"),n("ddb0"),n("6c02")),k=(n("b0c0"),n("5502")),S=(n("99af"),n("5530")),O=n("1da1"),T=(n("e9c4"),n("96cf"),n("bc3a")),j=n.n(T),A=!1,E="https://tdx.transportdata.tw/api/basic",_="https://gist.motc.gov.tw/gist_api",I=A?"http://localhost:3000/api/tdx/token":"https://nuxt-platform.vercel.app/api/tdx/token",w=A?"http://localhost:3000/api/tdx/public":"https://nuxt-platform.vercel.app/api/tdx/public";function D(){return B.apply(this,arguments)}function B(){return B=Object(O["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch(I).then((function(t){return t.json()})).then((function(t){if(console.log(t),!t)return!1;var e=Object(S["a"])(Object(S["a"])({},t),{},{token_fetched_at:Date.now()});return localStorage.setItem("TS_Authorization",JSON.stringify(e)),e})).catch((function(t){return console.error("Failed to fetch token:",t),!1}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),B.apply(this,arguments)}function R(){return M.apply(this,arguments)}function M(){return M=Object(O["a"])(regeneratorRuntime.mark((function t(){var e,n,a,r,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=localStorage.getItem("TS_Authorization"),!e){t.next=7;break}if(e=JSON.parse(e),n=e,a=n.token_fetched_at,r=n.expires_in,i=Date.now(),!(i-a<1e3*r)){t.next=7;break}return t.abrupt("return",e.access_token);case 7:return t.next=9,D();case 9:return o=t.sent,t.abrupt("return",o?o.access_token:null);case 11:case"end":return t.stop()}}),t)}))),M.apply(this,arguments)}var N=j.a.create({baseURL:E,headers:{"Accept-Encoding":"br,gzip"}});N.interceptors.request.use(function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,R();case 2:return n=t.sent,n?e.headers["Authorization"]="Bearer ".concat(n):console.error("無法取得有效的 Token"),t.abrupt("return",e);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){return Promise.reject(t)})),N.interceptors.response.use((function(t){return t}),function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(e){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.response,a=e.config,403!==(null===n||void 0===n?void 0:n.status)){t.next=9;break}return console.warn("403 錯誤，嘗試重新取得 Token..."),t.next=5,D();case 5:if(r=t.sent,!r){t.next=9;break}return a.headers["Authorization"]="Bearer ".concat(r.access_token),t.abrupt("return",N(a));case 9:return 429===(null===n||void 0===n?void 0:n.status)&&(alert("抱歉，TDX服務(免費版)每分鐘僅能發送5次API，請稍後再試！"),st.dispatch("showLoader",!1)),t.abrupt("return",Promise.reject(e));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());var L=j.a.create({baseURL:_,headers:{"Accept-Encoding":"br,gzip"}});L.interceptors.request.use(function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,R();case 2:return n=t.sent,n?e.headers["Authorization"]="Bearer ".concat(n):console.error("無法取得有效的 Token"),t.abrupt("return",e);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){return Promise.reject(t)})),L.interceptors.response.use((function(t){return t}),function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(e){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.response,a=e.config,403!==(null===n||void 0===n?void 0:n.status)){t.next=9;break}return console.warn("GIST 403 錯誤，嘗試重新取得 Token..."),t.next=5,D();case 5:if(r=t.sent,!r){t.next=9;break}return a.headers["Authorization"]="Bearer ".concat(r.access_token),t.abrupt("return",L(a));case 9:return 429===(null===n||void 0===n?void 0:n.status)&&st.dispatch("showLoader",!1),t.abrupt("return",Promise.reject(e));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());var P=j.a.create({baseURL:w}),x={getCity:function(){return L.get("/V3/Map/Basic/City")},getCityAddress:function(t){return L.get("/V3/Map/GeoCode/Coordinate/Address/"+t+"政府")},getScenicSpot:function(){return P.get("/Tourism/ScenicSpot")},getRestaurant:function(){return P.get("/Tourism/Restaurant")},getHotel:function(){return P.get("/Tourism/Hotel")},getBikeStation:function(t){return P.get("/Bike/Station?city=".concat(t))},getBikeAvailability:function(t){return P.get("/Bike/Availability?city=".concat(t))},getBusCityRoute:function(t){return P.get("/Bus/Route?city=".concat(t))},getBusCityStopOfRoute:function(t){return P.get("/Bus/StopOfRoute?city=".concat(t))},getRealTimeOfArrival:function(t,e){return P.get("/Bus/RealTimeByFrequency?city=".concat(t,"&routeName=").concat(e))},getBusStopOfRoute:function(t,e){return P.get("/Bus/StopOfRouteByName?city=".concat(t,"&routeName=").concat(e))},getEstimatedTimeOfArrival:function(t,e){return P.get("/Bus/EstimatedTimeOfArrival?city=".concat(t,"&routeName=").concat(e))},getBusShape:function(t,e){return P.get("/Bus/Shape?city=".concat(t,"&routeName=").concat(e))}},V=n("ed08"),H=(n("7db0"),n("159b"),n("3835")),U=n("e11e"),K=n.n(U),Y=n("e1d7"),F={spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,zoomToBoundsOnClick:!0,argumentsspiderfyOnMaxZoom:!1,maxClusterRadius:120},z={delay:800,dashArray:[15,30],weight:5,color:"#58c5d7",pulseColor:"#FFFFFF",paused:!1,reverse:!1,hardwareAccelerated:!0,opacity:.9},G=function(t){return K.a.divIcon({html:t,className:"clusterIcon",iconSize:K.a.point(40,40)})},q={setTitleLayer:function(t){K.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png?{foo}",{foo:"bar",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(t)},createMarkersCluster:function(){return K.a.markerClusterGroup(Object(S["a"])(Object(S["a"])({},F),{},{iconCreateFunction:function(t){var e=t.getAllChildMarkers(),n='<div class="map-circle cluster-circle">'.concat(e.length,"</div>");return G(n)}}))},createMarker:function(t,e){return K.a.marker(t,e)},getDivIcon:function(t,e,n){var a=n||[40,40],r=Object(H["a"])(a,2),i=r[0],o=r[1];return K.a.divIcon({html:t,className:e,iconSize:K.a.point(i,o)})},getAntPathLayer:function(t){return Object(Y["antPath"])(t,z)},getPopup:function(t,e){return K.a.popup(t).setContent(e)},createFeatureGroup:function(){return K.a.featureGroup()}},W=n("1134"),J=n.n(W),Z=new J.a.Wkt,$={getCityGeometry:function(t){var e=Z.read(t).toJson().coordinates;return[e[1],e[0]]},getShapeGeometry:function(t){return Z.read(t).toJson().coordinates.map((function(t){return t.reverse()}))}},Q=(n("ac1f"),n("1276"),{getCurrentMarkerHtml:function(){return'<div class="map-circle current-circle"><i class="fas fa-location-arrow"></i></div>'},getTravelMarkerHtml:function(t){return'<div class="map-circle marker-circle">'.concat(t,"</div>")},getTravelPopupContent:function(t){var e=t.name,n=t.page,a=t.id;return'\n    <p class="popup-name">'.concat(e,'</p>\n    <a class="popup-link" href="#/travel/').concat(n,"/").concat(a,"/").concat(e,'">\n      <i class="fas fa-link"></i>\n    </a>')},getTravelIcon:function(t){switch(t){case"ScenicSpot":return'<i class="fas fa-binoculars"></i>';case"Restaurant":return'<i class="fas fa-utensils"></i>';case"Hotel":return'<i class="fas fa-bed"></i>'}},getBikeMarkerHtml:function(){return'<div class="map-circle marker-circle"><i class="fas fa-bicycle"></i></div>'},getBikeStationStatus:function(t){switch(t){case 0:return{class:"error",text:"停止營運"};case 1:return{class:"success",text:"正常營運"};case 2:return{class:"warn",text:"暫停營運"}}},getBikeType:function(t){switch(t){case 1:return"YouBike1.0";case 2:return"YouBike2.0"}},formateBikeStationName:function(t){var e=t.split("_");return e.length>1?e[e.length-1]:e[0]},getBusStopMarkerHtml:function(t){return'<div class="stop-marker"><span>'.concat(t,"</span></div>")},getBusStatus:function(t){return 1===t?"start":2===t?"finish":void 0},getBusMarkerHtml:function(t){return'<div class="bus-marker"><i class="fas fa-bus"></i><span>'.concat(t,"</span></div>")}}),X=n("b824"),tt=q.createFeatureGroup(),et=q.createFeatureGroup(),nt=null,at={namespaced:!0,state:{OSM:null,marker:null,markersCluster:null,currentPosition:null},mutations:{SET_OSM:function(t,e){t.OSM=e},SET_MARKER:function(t,e){t.marker=e},SET_MARKERS_CLUSTER:function(t,e){t.markersCluster=e},SET_CURRENT_POSITION:function(t,e){t.currentPosition=e}},actions:{buildMap:function(t,e){var n=t.commit;n("SET_OSM",e),q.setTitleLayer(e)},setLocationOfCityOnMap:function(t,e){var n=t.rootState;console.log(e);var a=X.find((function(t){return t.CityName===e}));console.log(a),n.map.OSM.setView(a.latlng,12)},clearMarkersCluster:function(t){var e=t.state,n=e.markersCluster;n&&n.clearLayers()},setCurrentPositionMarker:function(t,e){var n=t.state,a=t.dispatch,r=t.commit;a("clearMarkersCluster");var i=Q.getCurrentMarkerHtml(),o=q.getDivIcon(i,"currentIcon"),c=q.createMarker(e,{icon:o});r("SET_MARKER",c.addTo(n.OSM))},setTravelMarkers:function(t,e){var n=t.state,a=t.commit,r=t.dispatch,i=e.page,o=e.markers;r("clearMarkersCluster");var c=q.createMarkersCluster(),u=Q.getTravelIcon(i);o.forEach((function(t){var e=t.position,n=t.name,a=t.id,r=Q.getTravelMarkerHtml(u),o=q.getDivIcon(r,"travelIcon"),s=q.createMarker(e,{icon:o}),l={minWidth:250,className:"travel-popup"},p=Q.getTravelPopupContent({name:n,page:i,id:a}),f=q.getPopup(l,p);s.bindPopup(f).on("click",(function(){return s.openPopup()})),c.addLayer(s)})),a("SET_MARKERS_CLUSTER",c),n.OSM.addLayer(c)},setBikeMarkers:function(t,e){var n=t.state,a=t.commit,r=t.dispatch;r("clearMarkersCluster");var i=q.createMarkersCluster();e.forEach((function(t){var e=t.StationPosition,n=t.detail,a=t.ServiceType,r=t.StationName,o=[e.PositionLat,e.PositionLon],c=Q.getBikeMarkerHtml(),u=q.getDivIcon(c,"travelIcon"),s=q.createMarker(o,{icon:u}),l=Q.getBikeStationStatus(n.ServiceStatus),p=Q.getBikeType(a),f=Q.formateBikeStationName(r.Zh_tw),d={minWidth:250,className:"bike-popup"},h=b(),m=q.getPopup(d,h);function b(){return'\n          <div class="bike-header">\n            <div class="bike-top">\n              <p class="bike-status '.concat(l.class,'">').concat(l.text,'</p>\n              <div class="bike-type">').concat(p,'</div>\n            </div>\n            <p class="bike-name">').concat(f,'</p>\n          </div>\n          <div class="bike-body">\n            <p class="bike-rent">可出借<span>').concat(n.AvailableRentBikes||0,'</span>輛</p>\n            <p class="bike-return">可歸還<span>').concat(n.AvailableReturnBikes||0,"</span>輛</p>\n          </div>")}s.bindPopup(m).on("click",(function(){return s.openPopup()})),i.addLayer(s)})),a("SET_MARKERS_CLUSTER",i),n.OSM.addLayer(i)},setBusStopsMarker:function(t,e){var n=t.state;tt.clearLayers(),e.forEach((function(t,e){var a=t.StopPosition,r=t.StopName,i=a.PositionLat,o=a.PositionLon;0===e&&n.OSM.setView([i,o],14);var c=Q.getBusStopMarkerHtml(e+1),u=q.getDivIcon(c,"stop-icon",[20,20]),s=q.createMarker([i,o],{icon:u}),l={minWidth:150,className:"stop-popup"},p="<p>".concat(r.Zh_tw,"</p>"),f=q.getPopup(l,p);s.bindPopup(f).on("click",(function(){return s.openPopup()})),tt.addLayer(s)})),n.OSM.addLayer(tt)},setBusMarker:function(t,e){var n=t.state;et.clearLayers(),e.forEach((function(t){var e=t.BusPosition,n=t.PlateNumb,a=t.DutyStatus,r=e.PositionLat,i=e.PositionLon,o=Q.getBusStatus(a),c=Q.getBusMarkerHtml(n),u="bus-icon ".concat(o),s=q.getDivIcon(c,u),l=q.createMarker([r,i],{icon:s});et.addLayer(l)})),n.OSM.addLayer(et)},setBusRouteShape:function(t,e){var n=t.state,a=e.Geometry;nt&&n.OSM.removeLayer(nt);var r=$.getShapeGeometry(a);nt=q.getAntPathLayer(r),n.OSM.addLayer(nt),n.OSM.fitBounds(nt.getBounds())},clearBusMap:function(t){var e=t.state;nt&&e.OSM.removeLayer(nt),et.clearLayers(),tt.clearLayers()}}},rt={namespaced:!0,state:{selectCity:"",travelData:[],scenicSpotData:[],restaurantData:[],hotelData:[],keywords:"",activeID:""},mutations:{SET_TRAVEL_DATA:function(t,e){t.travelData=e},SET_SCENIC_SPOT_DATA:function(t,e){t.scenicSpotData=e},SET_RESTAURANT_DATA:function(t,e){t.restaurantData=e},SET_HOTEL_DATA:function(t,e){t.hotelData=e},SET_SELECT_CITY:function(t,e){t.selectCity=e},SET_KEYWORDS:function(t,e){t.keywords=e},SET_ACTIVE_ID:function(t,e){t.activeID=e}},actions:{clearSearchBar:function(t){var e=t.commit;e("SET_SELECT_CITY",""),e("SET_KEYWORDS",""),e("SET_TRAVEL_DATA",null),e("SET_ACTIVE_ID","")},fetchTravelData:function(t,e){var n=t.state,a=t.dispatch,r=n.scenicSpotData,i=n.restaurantData,o=n.hotelData;switch(e){case"ScenicSpot":return 0!==r.length?r:a("fetchScenicSpot");case"Restaurant":return 0!==i.length?i:a("fetchRestaurant");case"Hotel":return 0!==o.length?o:a("fetchHotel")}},setTravelData:function(t,e){var n=t.state,a=t.commit,r=null;switch(e){case"ScenicSpot":r=n.scenicSpotData;break;case"Restaurant":r=n.restaurantData;break;case"Hotel":r=n.hotelData;break}a("SET_TRAVEL_DATA",r)},fetchScenicSpot:function(t){var e=t.commit;return x.getScenicSpot().then((function(t){return e("SET_SCENIC_SPOT_DATA",t.data),t.data})).catch((function(t){throw t}))},fetchRestaurant:function(t){var e=t.commit;return x.getRestaurant().then((function(t){return e("SET_RESTAURANT_DATA",t.data),t.data})).catch((function(t){throw t}))},fetchHotel:function(t){var e=t.commit;return x.getHotel().then((function(t){return e("SET_HOTEL_DATA",t.data),t.data})).catch((function(t){throw t}))}}},it=(n("4de4"),{namespaced:!0,state:{bikeStations:null,bikeCities:X.filter((function(t){return t.bike}))},mutations:{SET_BIKE_STATIONS:function(t,e){t.bikeStations=e}},actions:{fetchBikeStationData:function(t,e){var n=t.commit,a=t.dispatch;return Promise.all([a("fetchBikeStation",e),a("fetchBikeAvailability",e)]).then((function(t){var e=Object(H["a"])(t,2),a=e[0],r=e[1],i=a.map((function(t){return Object(S["a"])(Object(S["a"])({},t),{},{detail:r.find((function(e){return e.StationUID===t.StationUID}))})}));n("SET_BIKE_STATIONS",i)})).catch((function(t){throw t}))},fetchBikeStation:function(t,e){return x.getBikeStation(e).then((function(t){return t.data})).catch((function(t){throw t}))},fetchBikeAvailability:function(t,e){return x.getBikeAvailability(e).then((function(t){return t.data})).catch((function(t){throw t}))}}}),ot=(n("d9e2"),{namespaced:!0,state:{busCity:"",busRoutes:[],busKeyWords:""},mutations:{SET_BUS_CITY:function(t,e){t.busCity=e},SET_BUS_ROUTES:function(t,e){t.busRoutes=e},SET_BUS_KEYWORDS:function(t,e){t.busKeyWords=e}},actions:{resetBusState:function(t){var e=t.commit;e("SET_BUS_CITY",null),e("SET_BUS_ROUTES",null),e("SET_BUS_KEYWORDS","")},getBusTotalData:function(t,e){return Object(O["a"])(regeneratorRuntime.mark((function n(){var a,r,i,o,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.commit,r=t.dispatch,n.prev=1,n.next=4,r("fetchBusCityRoute",e);case 4:return i=n.sent,n.next=7,r("fetchBusCityStopOfRoute",e);case 7:o=n.sent,c=i.map((function(t){return Object(S["a"])(Object(S["a"])({},t),{},{detail:o.find((function(e){return e.RouteUID===t.RouteUID}))})})),console.log(c),a("SET_BUS_ROUTES",c),n.next=16;break;case 13:throw n.prev=13,n.t0=n["catch"](1),new Error(n.t0);case 16:case"end":return n.stop()}}),n,null,[[1,13]])})))()},fetchBusCityRoute:function(t,e){return x.getBusCityRoute(e).then((function(t){return t.data})).catch((function(t){throw t}))},fetchBusCityStopOfRoute:function(t,e){return x.getBusCityStopOfRoute(e).then((function(t){return t.data})).catch((function(t){throw t}))},fetchRealTimeOfArrival:function(t,e){var n=e.city,a=e.route;return x.getRealTimeOfArrival(n,a).then((function(t){return t.data})).catch((function(t){throw t}))},fetchBusStopOfRoute:function(t,e){var n=e.city,a=e.route;return x.getBusStopOfRoute(n,a).then((function(t){return t.data})).catch((function(t){throw t}))},fetchEstimatedTimeOfArrival:function(t,e){var n=e.city,a=e.route;return x.getEstimatedTimeOfArrival(n,a).then((function(t){return t.data})).catch((function(t){throw t}))},fetchBusShape:function(t,e){var n=e.city,a=e.route;return x.getBusShape(n,a).then((function(t){return t.data})).catch((function(t){throw t}))}}}),ct=new V["a"],ut=function(t){var e=Object.assign({loader:!1,cities:null,cityAddress:{},mapActive:!1},t);return Object(k["a"])({modules:{map:at,travel:rt,bike:it,bus:ot},state:e,mutations:{SET_LOADER:function(t,e){t.loader=e},SET_CITIES:function(t,e){t.cities=e},SET_CITY_ADDRESS:function(t,e){var n=e.name,a=e.data;t.cityAddress[n]=a},SET_MAP_ACTIVE:function(t,e){t.mapActive=e}},getters:{getCities:function(t){return t.cities||[]}},actions:{showLoader:function(t,e){var n=t.commit;e?ct.fixedBody():ct.scrollBody(),n("SET_LOADER",e)},fetchCity:function(t){var e=t.commit;return x.getCity().then((function(t){e("SET_CITIES",t.data)})).catch((function(t){throw t}))},fetchCityAddress:function(t,e){var n=t.state,a=t.commit;return n.cityAddress[e]?n.cityAddress[e]:x.getCityAddress(e).then((function(t){return a("SET_CITY_ADDRESS",{name:e,data:t.data}),t.data})).catch((function(t){throw t}))}}})},st=ut(),lt=function(t){return Object(a["x"])("data-v-eb1c3138"),t=t(),Object(a["v"])(),t},pt=lt((function(){return Object(a["h"])("div",{class:"home"},[Object(a["h"])("div",{class:"wrap"},[Object(a["h"])("h1",{"data-test":"home-title"},"歡迎來到台灣觀光查詢網"),Object(a["h"])("p",null,"-- 請至左列選擇查詢項目 --")])],-1)}));function ft(t,e,n,r,i,o){var c=Object(a["C"])("MapLayout");return Object(a["u"])(),Object(a["e"])(c,null,{default:Object(a["I"])((function(){return[pt]})),_:1})}var dt=n("4625"),ht={components:{MapLayout:dt["a"]}};n("a3a0");const mt=d()(ht,[["render",ft],["__scopeId","data-v-eb1c3138"]]);var bt=mt,yt=bt,vt=[{path:"/",name:"home",component:yt},{path:"/travel/:page",name:"travel",component:function(){return n.e("chunk-bb86e918").then(n.bind(null,"a720"))},props:!0,children:[{path:"",name:"travel-index",props:!0,beforeEnter:function(t,e){t.params.page===e.params.page&&(t.query.prev=!0)},component:function(){return n.e("chunk-57ce79e0").then(n.bind(null,"1268"))}},{path:":id/:name",name:"travel-detail",props:!0,component:function(){return n.e("chunk-3ea0325d").then(n.bind(null,"b2de"))}},{path:":pathMatch(.*)*",name:"not-found",component:function(){return n.e("chunk-2fcdac3e").then(n.bind(null,"6785"))}}]},{path:"/bike",name:"bike",component:function(){return n.e("chunk-47aa1cfd").then(n.bind(null,"73af"))}},{path:"/bus",name:"bus",component:function(){return n.e("chunk-1e478b2e").then(n.bind(null,"5b92"))},children:[{path:"",name:"bus-index",component:function(){return n.e("chunk-3a08d0fb").then(n.bind(null,"1fba"))}},{path:":city/:route/:id",name:"bus-detail",props:!0,component:function(){return n.e("chunk-6cdd9285").then(n.bind(null,"f223"))}},{path:":pathMatch(.*)*",name:"not-found",component:function(){return n.e("chunk-2fcdac3e").then(n.bind(null,"6785"))}}]},{path:"/network-error",name:"network-error",props:!0,component:function(){return n.e("chunk-3e6e1ec5").then(n.bind(null,"8d63"))}},{path:"/:pathMatch(.*)*",name:"not-found",component:function(){return n.e("chunk-2fcdac3e").then(n.bind(null,"6785"))}}],Ct=Object(g["b"])({history:Object(g["c"])("/Taiwain-Sightseeing/"),routes:vt,scrollBehavior:function(t,e,n){return n||{top:0}}});Ct.beforeEach((function(){st.commit("SET_MAP_ACTIVE",!1)}));var gt=Ct;n("2573"),n("6cc5"),n("8243"),n("3ac1"),n("c1c3");Object(a["d"])(C).use(st).use(gt).mount("#app")},"7b0d":function(t,e,n){},"83d2":function(t,e,n){"use strict";n("3cbb")},"966b":function(t,e,n){"use strict";n("7b0d")},a3a0:function(t,e,n){"use strict";n("3c11")},aac4:function(t,e,n){"use strict";var a=n("7a23"),r=["href","target"];function i(t,e,n,i,o,c){var u=Object(a["C"])("RouterLink");return c.isExternal?(Object(a["u"])(),Object(a["g"])("a",Object(a["o"])({key:0,href:"false"===t.to?"javascript:;":t.to,target:"false"===t.to?"_self":"_blank",rel:"noopener",class:"appLink"},t.$props,{"data-test":"external-link"}),[Object(a["B"])(t.$slots,"default",{},void 0,!0)],16,r)):(Object(a["u"])(),Object(a["e"])(u,Object(a["o"])({key:1,"data-test":"internal-link"},t.$props,{class:"appLink"}),{default:Object(a["I"])((function(){return[Object(a["B"])(t.$slots,"default",{},void 0,!0)]})),_:3},16))}var o=n("5530"),c=(n("2ca0"),n("6c02")),u={props:Object(o["a"])({},c["a"].props),components:{RouterLink:c["a"]},computed:{isExternal:function(){return"string"===typeof this.to&&(this.to.startsWith("http")||"false"===this.to)}}},s=(n("83d2"),n("d959")),l=n.n(s);const p=l()(u,[["render",i],["__scopeId","data-v-2e1c376b"]]);var f=p;e["a"]=f},b824:function(t){t.exports=JSON.parse('[{"CityID":"A","CityName":"臺北市","CityCode":"TPE","City":"Taipei","CountyID":"A","Version":"21.08.1","bike":true,"latlng":[25.0375417,121.5645581]},{"CityID":"B","CityName":"臺中市","CityCode":"TXG","City":"Taichung","CountyID":"B","Version":"21.08.1","bike":true,"latlng":[24.1477358,120.6736482]},{"CityID":"C","CityName":"基隆市","CityCode":"KEE","City":"Keelung","CountyID":"C","Version":"21.08.1","bike":false,"latlng":[25.1276035,121.7391833]},{"CityID":"D","CityName":"臺南市","CityCode":"TNN","City":"Tainan","CountyID":"D","Version":"21.08.1","bike":true,"latlng":[22.9908275,120.2129143]},{"CityID":"E","CityName":"高雄市","CityCode":"KHH","City":"Kaohsiung","CountyID":"E","Version":"21.08.1","bike":true,"latlng":[22.6272784,120.3014353]},{"CityID":"F","CityName":"新北市","CityCode":"NWT","City":"NewTaipei","CountyID":"F","Version":"21.08.1","bike":true,"latlng":[25.0133672,121.4639878]},{"CityID":"G","CityName":"宜蘭縣","CityCode":"ILA","City":"YilanCounty","CountyID":"G","Version":"21.08.1","bike":false,"latlng":[24.7512996,121.7536725]},{"CityID":"H","CityName":"桃園市","CityCode":"TAO","City":"Taoyuan","CountyID":"H","Version":"21.08.1","bike":true,"latlng":[24.9936286,121.3009798]},{"CityID":"I","CityName":"嘉義市","CityCode":"CYI","City":"Chiayi","CountyID":"I","Version":"21.08.1","bike":false,"latlng":[23.4792983,120.4485925]},{"CityID":"J","CityName":"新竹縣","CityCode":"HSQ","City":"HsinchuCounty","CountyID":"J","Version":"21.08.1","bike":true,"latlng":[24.8268246,121.0206171]},{"CityID":"K","CityName":"苗栗縣","CityCode":"MIA","City":"MiaoliCounty","CountyID":"K","Version":"21.08.1","bike":true,"latlng":[24.5601594,120.8214265]},{"CityID":"M","CityName":"南投縣","CityCode":"NAN","City":"NantouCounty","CountyID":"M","Version":"21.08.1","bike":false,"latlng":[23.9169628,120.6840581]},{"CityID":"N","CityName":"彰化縣","CityCode":"CHA","City":"ChanghuaCounty","CountyID":"N","Version":"21.08.1","bike":true,"latlng":[24.0685233,120.5574793]},{"CityID":"O","CityName":"新竹市","CityCode":"HSZ","City":"Hsinchu","CountyID":"O","Version":"21.08.1","bike":false,"latlng":[24.8039476,120.9646985]},{"CityID":"P","CityName":"雲林縣","CityCode":"YUN","City":"YunlinCounty","CountyID":"P","Version":"21.08.1","bike":true,"latlng":[23.7092035,120.5429863]},{"CityID":"Q","CityName":"嘉義縣","CityCode":"CYQ","City":"ChiayiCounty","CountyID":"Q","Version":"21.08.1","bike":true,"latlng":[23.4599074,120.241712]},{"CityID":"T","CityName":"屏東縣","CityCode":"PIF","City":"PingtungCounty","CountyID":"T","Version":"21.08.1","bike":true,"latlng":[22.6813732,120.4926576]},{"CityID":"U","CityName":"花蓮縣","CityCode":"HUA","City":"HualienCounty","CountyID":"U","Version":"21.08.1","bike":false,"latlng":[23.9768285,121.6052988]},{"CityID":"V","CityName":"臺東縣","CityCode":"TTT","City":"TaitungCounty","CountyID":"V","Version":"21.08.1","bike":false,"latlng":[22.7545748,121.1416762]},{"CityID":"W","CityName":"金門縣","CityCode":"KIN","City":"KinmenCounty","CountyID":"W","Version":"21.08.1","bike":false,"latlng":[24.4327087,118.317098]},{"CityID":"X","CityName":"澎湖縣","CityCode":"PEN","City":"PenghuCounty","CountyID":"X","Version":"21.08.1","bike":false,"latlng":[23.5654806,119.5638015]},{"CityID":"Z","CityName":"連江縣","CityCode":"LIE","City":"LienchiangCounty","CountyID":"Z","Version":"21.08.1","bike":false,"latlng":[26.160583,119.958613]}]')},c1c3:function(t,e,n){},e8e1:function(t,e,n){},ed08:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return r}));n("d3b7");function a(){return new Promise((function(t,e){"geolocation"in window.navigator?window.navigator.geolocation.getCurrentPosition((function(e){t([e.coords.latitude,e.coords.longitude])}),(function(){e(!1)})):e(!1)}))}var r=function(){var t=null;function e(){this.pageTop=0,this.body=document.body,this.html=document.querySelector("html")}return e.prototype.fixedBody=function(){this.pageTop=window.scrollY,this.html.style.height=window.screen.availHeight+"px",this.body.style.position="fixed",this.body.style.top=-this.pageTop+"px"},e.prototype.scrollBody=function(){this.html.style.height="auto",this.body.style.position="",this.body.style.top="",window.scrollTo(0,this.pageTop)},function(){return t||(t=new e),t}}()},f5d0:function(t,e,n){"use strict";n("18fe")},fe8f:function(t,e,n){}});
//# sourceMappingURL=app.7a9845df.js.map